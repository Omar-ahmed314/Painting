.MODEL SMALL
.STACK 64
.DATA
COLOR DB 0FH
EXIT_STRING DB 'Exiting:  Thanks','$'
.CODE
MAIN PROC FAR
MOV AX, @DATA
MOV DS, AX
MOV AH, 0
MOV AL, 13H
INT 10H
MOV AX, 1 
INT 33H
LOOP1: 
MOV AX, 3
INT 33H

; CHECK IF EXIT IS CLICKED
MOV AH, 1H
INT 16H
CMP AH, 12H
JZ EXIT
; CHECK IF THE LEFT MOUSE BUTTON CLICKED
CMP BL, 01H
JNZ LOOP1
; CHECK THE COLOR CHOSEN
MOV AH, 1H
INT 16H
JZ DRAW
; IF ANY KEY IS CHOSEN FLUSH THE BUFFER
MOV AH, 0H
INT 16H
; CHECK IF RED
CMP AH, 13H
JZ RED
; CHECK IF WHITE
CMP AH, 11H
JZ WHITE
; CHECK IF GREEN
CMP AH, 22H
JZ GREEN
; CHECK IF BLUE
CMP AH, 30H
JZ BLUE
; CHECK IF PURPLE
CMP AH, 19H
JZ PURPLE
; CHECK IF YELLOW
CMP AH, 15H
JZ YELLOW


;OTHERWISE
JMP DRAW
;RED
RED:
MOV COLOR, 04H
JMP DRAW
BLUE:
MOV COLOR, 03H
JMP DRAW
GREEN:
MOV COLOR, 0AH
JMP DRAW
WHITE:
MOV COLOR, 0FH
JMP DRAW
PURPLE:
MOV COLOR, 05H
JMP DRAW
YELLOW:
MOV COLOR, 0EH
JMP DRAW


DRAW:
MOV AL, COLOR
PUSH DX
PUSH AX
MOV BX, 2H
MOV AX, CX
CWD
DIV BX
MOV BX, 0H
MOV CX, AX
POP AX
POP DX
MOV AH, 0CH
INT 10H
JMP LOOP1      
EXIT:
MOV AH, 0
MOV AL, 03H ; change to text mode again
INT 10H
; CHANGING THE CURSOR POSITION
MOV AH, 2
MOV DX, 0000H
INT 10H
; PRINTING THE EXIT MASSEGE
MOV AH, 9
MOV DI, OFFSET EXIT_STRING
INT 21H
HLT
MAIN ENDP
END MAIN